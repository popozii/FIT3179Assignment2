{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "International Tourism Arrivals in Malaysia by State",
  "repeat": ["1995", "2000", "2005", "2010", "2015", "2020"],
  "columns": 2,
  "spec": {
    "width": 400,
    "height": 300,
    "params": [
      {
        "name": "zoom",
        "value": 1200,
        "bind": {
          "input": "range",
          "min": 500,
          "max": 3000,
          "step": 100,
          "name": "Zoom Level: "
        }
      }
    ],
    "projection": {
      "type": "mercator",
      "scale": {"expr": "zoom"},
      "center": [115, 4]
    },
    "layer": [
      {
        "data": {
          "url": "https://raw.githubusercontent.com/popozii/FIT3179Assignment2/main/malaysia_state.topojson",
          "format": { "type": "topojson", "feature": "ne_10m_admin_1_states_provinces" }
        },
        "transform": [{
          "calculate": "'Data is not available for ' + datum.properties.name",
          "as": "note"
        }],
        "mark": {
          "type": "geoshape",
          "fill": "#ddd",
          "stroke": "white",
          "strokeWidth": 1
        },
        "encoding": { "tooltip": { "field": "note" } }
      },
      {
        "data": {
          "url": "https://raw.githubusercontent.com/popozii/FIT3179Assignment2/main/ST.INT.ARVL.csv"
        },
        "transform": [
          {
            "filter": "datum['Country Code'] == 'MYS'"
          },
          {
            "fold": ["1995", "1996", "1997", "1998", "1999", "2000", "2001", "2002", "2003", "2004", "2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020"],
            "as": ["Year", "Arrivals"]
          },
          {
            "calculate": "toNumber(datum.Arrivals)",
            "as": "Arrivals_num"
          }
        ],
        "mark": { 
          "type": "geoshape", 
          "stroke": "#fff", 
          "strokeWidth": 0.5 
        },
        "encoding": {
          "color": {
            "field": "Arrivals_num",
            "type": "quantitative",
            "scale": {
              "domain": [4000000, 30000000],
              "scheme": "blues"
            },
            "legend": { 
              "format": ".2s", 
              "title": "Tourist Arrivals" 
            }
          },
          "tooltip": [
            { 
              "field": "Country Name", 
              "type": "nominal", 
              "title": "Country" 
            },
            {
              "field": "Arrivals_num",
              "type": "quantitative",
              "title": "Tourist Arrivals",
              "format": ","
            },
            {
              "field": "Year",
              "type": "nominal",
              "title": "Year"
            }
          ]
        }
      },
      {
        "data": {
          "values": [{
            "1995": "Year: 1995",
            "2000": "Year: 2000", 
            "2005": "Year: 2005",
            "2010": "Year: 2010",
            "2015": "Year: 2015",
            "2020": "Year: 2020"
          }]
        },
        "mark": {
          "type": "text",
          "align": "right",
          "baseline": "bottom",
          "x": "width",
          "y": 0,
          "fontSize": 12,
          "fontWeight": "bold"
        },
        "encoding": {
          "text": { "field": { "repeat": "repeat" } }
        }
      }
    ]
  },
  "config": {}
}